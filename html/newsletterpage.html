<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/newsletter.css">
    <link rel="stylesheet" href="../styles/styles.css">
    <script src="https://kit.fontawesome.com/b269aa07db.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <title>Newsletter</title>
</head>

<body>
<header>
</header>

<main>
    <article>
        <div id="newsletter-info">
            <!--
            <h2>Sign up for our newsletter</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dignissim urna purus.
            Etiam non sagittis enim. Vestibulum justo quam, mattis sit amet tortor in, imperdiet suscipit ante.
            Donec egestas velit in lectus porttitor feugiat.</p>
            -->
        </div>

        <form id="newsletter-form">
            <div id="message"></div>
            <div class="form-input"></div>
            <!--
            <div class="row">
                <input type="text" required id="firstname" placeholder="First name" name="firstname">
                <input type="text" required id="lastname" placeholder="Last name" name="lastname">

            <div class="row">
                <input type="email" required id="email" placeholder="Email" name="email">
                <select name="languages" id="languages-news">
                    <option value="english">English</option>
                    <option value="spanish">Español</option>
                    <option value="german">Deutsch</option>
                    <option value="french">Français</option>
                </select>
            </div>
            -->
            <div class="subscribe-button">
                <input type="submit" value="Subscribe" id="subscribe">
            </div>
        </form>

    </article>
</main>

<footer>
</footer>
</body>

<script>
    $(function(){
        $("header").load("header.html");
        $("footer").load("footer.html");
    });
</script>

<script>

    $(document).ready(function(){
        $.getJSON("../data/newsletterdata.json", function(data){
            for (let idx = 0; idx < data.information.length; idx++) {
                let information_item = data.information[idx];

                $('#newsletter-info').append(
                    '<h2>' + information_item.title + '</h2>' +
                    '<p>' + information_item.content + '</p>'
                );
            }

            let current_index = 0;
            let idx;
            for (idx=0; idx < data.form.length; idx++) {
                let form_item = data.form[idx];


                if (idx % 2 === 0) {
                    current_index = idx;

                    $('.form-input').append(
                        '<div class="row row' + current_index + '">' +
                        '<input type="' + form_item.type + '" required id="' + form_item.id + '"' +
                        'placeholder="' + form_item.placeholder + '" name="' + form_item.name + '">' +
                        '</div>'
                    );
                }

                else {
                    $(".row" + current_index).append(
                        '<input type="' + form_item.type + '" required id="' + form_item.id + '"' +
                        'placeholder="' + form_item.placeholder + '" name="' + form_item.name + '">'
                    );
                }
            }

            if ((idx % 2) == 0) {
                let select_index=current_index+2;
                $('.form-input').append(
                    '<div class="row row' + select_index + '">' +
                    '<select name="languages" id="form-languages"></select>' +
                    '</div>'
                );
            }

            else {
                $(".row" + current_index).append(
                    '<select name="languages" id="form-languages"></select>'
                );
            }

            for (let idx = 0; idx < data.form_language_select.length; idx++) {
                let form_language_select_item = data.form_language_select[idx];

                $('#form-languages').append(
                    '<option value=' + form_language_select_item.value + '>' + form_language_select_item.option + '</option>'
                );
            }
        });
    });

</script>

<script>
    document.getElementById("subscribe").addEventListener("click", function (event) {
        if (document.getElementById("newsletter-form").checkValidity()) {
            event.preventDefault();
            document.getElementById("message").innerHTML = "<b>Congratulations! You have subscribed to our Newsletter!</b>";
        } else {
            if (!document.getElementById("firstname").checkValidity()) {
                $("#firstname").css("border", "4px solid red");
            }
            if (!document.getElementById("lastname").checkValidity()) {
                $("#lastname").css("border", "4px solid red");
            }
            if (!document.getElementById("email").checkValidity()) {
                $("#email").css("border", "4px solid red");
            }
        }
    }, false);
</script>

<script>
    document.getElementById("firstname").addEventListener("change", function () {
        if (document.getElementById("firstname").checkValidity()) {
            $("#firstname").css("border", "1px solid grey");
        } else {
            $("#firstname").css("border", "4px solid red");
        }
    });

    document.getElementById("lastname").addEventListener("change", function () {
        if (document.getElementById("lastname").checkValidity()) {
            $("#lastname").css("border", "1px solid grey");
        } else {
            $("#lastname").css("border", "4px solid red");
        }
    });

    document.getElementById("email").addEventListener("change", function () {
        if (document.getElementById("email").checkValidity()) {
            $("#email").css("border", "1px solid grey");
        } else {
            $("#email").css("border", "4px solid red");
        }
    });

</script>



</html>